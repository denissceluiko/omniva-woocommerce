(()=>{"use strict";const e=window.wc.blocksCheckout,t=window.React,o=window.wp.element,a=window.wp.data,l=()=>wcSettings&&wcSettings["omnivalt-blocks_data"]?wcSettings["omnivalt-blocks_data"]:[],n=e=>{for(let[t,o]of Object.entries(l().methods))if(e==o)return _("Detected Omniva method",o),!0;return!1},i=l().debug,s="OMNIVA BLOCKS DEBUG:",_=(...e)=>{i&&console.log(s,...e)},r=(e,t)=>{i&&(0,o.useEffect)((()=>{console.log(s,'Changed state "'+e+'" value to:',t)}),[t])},c=window.wp.i18n,m={block_options:(0,c.__)("Block options","omnivalt"),title_terminal:(0,c.__)("Parcel terminal","omnivalt"),select_terminal:(0,c.__)("Select parcel terminal","omnivalt"),error_terminal:(0,c.__)("Please select parcel terminal","omnivalt"),cart_terminal_info:(0,c.__)("You can choose the parcel terminal on the Checkout page","omnivalt"),loading_field:(0,c.__)("Loading select field...","omnivalt"),title_post:(0,c.__)("Post office","omnivalt"),select_post:(0,c.__)("Select post office","omnivalt"),error_post:(0,c.__)("Please select post office","omnivalt"),cart_post_info:(0,c.__)("You can choose the post office on the Checkout page","omnivalt"),providers:{omniva:(0,c.__)("Omniva","omnivalt"),matkahuolto:(0,c.__)("Matkahuolto","omnivalt")},map:{modal_title_post:(0,c.__)("post offices","omnivalt"),modal_title_terminal:(0,c.__)("parcel terminals","omnivalt"),modal_search_title_post:(0,c.__)("Post offices list","omnivalt"),modal_search_title_terminal:(0,c.__)("Parcel terminals list","omnivalt"),select_post:(0,c.__)("Select post office","omnivalt"),select_terminal:(0,c.__)("Select terminal","omnivalt"),search_placeholder:(0,c.__)("Enter postcode","omnivalt"),search_button:(0,c.__)("Search","omnivalt"),select_button:(0,c.__)("Select","omnivalt"),modal_open_button:(0,c.__)("Select in map","omnivalt"),use_my_location:(0,c.__)("Use my location","omnivalt"),my_position:(0,c.__)("Distance calculated from this point","omnivalt"),not_found:(0,c.__)("Place not found","omnivalt"),no_cities_found:(0,c.__)("There were no cities found for your search term","omnivalt"),geo_not_supported:(0,c.__)("Geolocation is not supported","omnivalt")},select:{not_found:(0,c.__)("Place not found","omnivalt"),search_too_short:(0,c.__)("Value is too short","omnivalt"),terminal_select:(0,c.__)("Select terminal","omnivalt"),terminal_map_title:(0,c.__)("parcel terminals","omnivalt"),terminal_map_search_title:(0,c.__)("Parcel terminals addresses","omnivalt"),post_select:(0,c.__)("Select post office","omnivalt"),post_map_title:(0,c.__)("post offices","omnivalt"),post_map_search_title:(0,c.__)("Post offices addresses","omnivalt"),enter_address:(0,c.__)("Enter postcode/address","omnivalt"),show_in_map:(0,c.__)("Show in map","omnivalt"),show_more:(0,c.__)("Show more","omnivalt")}},p=e=>{let t="";let o=0;for(;o<e;)t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(62*Math.random())),o+=1;return t},d=(e,t=0)=>(t||(t=5),{value:e,token:p(t)}),f=JSON.parse('{"apiVersion":2,"name":"omnivalt/terminal-selection-cart","version":"1.0.0","title":"Omniva terminal information","category":"woocommerce","description":"Allow to add components for Omniva shipping method","parent":["woocommerce/cart-order-summary-block"],"supports":{"html":false,"align":false,"multiple":false,"reusable":false},"attributes":{"lock":{"type":"object","default":{"remove":false,"move":false}}},"textdomain":"omnivalt"}');(0,e.registerCheckoutBlock)({metadata:f,component:({className:e})=>{const[l,i]=(0,o.useState)(""),[s,c]=(0,o.useState)(d(!1));r("Block show",s),r("Selected rate ID",l);const p=(0,a.useSelect)((e=>e("wc/store/cart").getCartData().shippingRates));return(0,o.useEffect)((()=>{if(c(d(!1)),p.length){const e=(e=>{if(!e.length)return[];let t=[];for(let o=0;o<e.length;o++)if(e[o].shipping_rates)for(let a=0;a<e[o].shipping_rates.length;a++)t.push(e[o].shipping_rates[a]);return t})(p);_("Received "+e.length+" active rates:",e);for(let t=0;t<e.length;t++)e[t].rate_id&&(n(e[t].rate_id)&&e[t].selected&&c(d(!0)),e[t].selected&&i(e[t].rate_id))}else _("Empty param: shippingRates")}),[p]),s.value?(0,t.createElement)("div",{className:"wc-block-components-totals-wrapper"},(0,t.createElement)("span",{className:"wc-block-components-totals-item"},m.cart_terminal_info)):(0,t.createElement)(t.Fragment,null)}})})();